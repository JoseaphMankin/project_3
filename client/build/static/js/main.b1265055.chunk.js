(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{302:function(e,t,n){e.exports=n.p+"static/media/loading.c5590569.svg"},306:function(e,t,n){e.exports=n(703)},311:function(e,t,n){},313:function(e,t,n){},360:function(e,t,n){},363:function(e,t,n){},365:function(e,t,n){},385:function(e,t,n){},387:function(e,t,n){},389:function(e,t,n){},391:function(e,t,n){},703:function(e,t,n){"use strict";n.r(t);var a=n(295),o=n.n(a),i=n(0),r=n.n(i),c=n(709),s=n(708),l=n(18),u=n(19),h=n(22),p=n(20),m=n(23),f=(n(311),n(707)),d=(n(313),n(9)),g=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(d.Container,null,r.a.createElement(d.Row,null,r.a.createElement("label",null,"CurrentBAC:"),r.a.createElement("span",null," BAC # ")),r.a.createElement(d.Row,null,r.a.createElement("label",null,"Estimated time until sober:"),r.a.createElement("span",null,"00:00")))}}]),t}(i.Component);n(360);var k=function(){return r.a.createElement(d.Button,null,"Session Btn")};n(363),n(365);var b=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(d.SideNav,{trigger:r.a.createElement(d.Button,null,"SIDE NAV DEMO"),options:{closeOnClick:!0}},r.a.createElement(d.SideNavItem,{userView:!0,user:{background:"img/office.jpg",image:"img/yuna.jpg",name:"John Doe",email:"jdandturk@gmail.com"}}),r.a.createElement(d.SideNavItem,{href:"#!icon",icon:"cloud"},"First Link With Icon"),r.a.createElement(d.SideNavItem,{href:"#!second"},"Second Link"),r.a.createElement(d.SideNavItem,{divider:!0}),r.a.createElement(d.SideNavItem,{subheader:!0},"Subheader"),r.a.createElement(d.SideNavItem,{waves:!0,href:"#!third"},"Third Link With Waves"))}}]),t}(i.Component),v=n(38),E=n.n(v),O={getUsers:function(){return E.a.get("/api/users")},getUser:function(e){return E.a.get("/api/users/"+e)},deleteUser:function(e){return E.a.delete("/api/users/"+e)},saveUser:function(e){return E.a.post("/api/users",e)},getSessions:function(){return E.a.get("/api/sessions")},getSession:function(e){return E.a.get("/api/sessions/"+e)},deleteSession:function(e){return E.a.delete("/api/sessions/"+e)},saveSession:function(e){return E.a.post("/api/sessions",e)},getDrinks:function(){return E.a.get("/api/drinks")},getDrink:function(e){return E.a.get("/api/drinks/"+e)},deleteDrink:function(e){return E.a.delete("/api/drinks/"+e)},saveDrink:function(e){return E.a.post("/api/drinks",e)}},y=(i.Component,n(385),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(d.Container,null,r.a.createElement(d.Row,null,"Drink"))}}]),t}(i.Component)),j=n(296);n(387);var S=function(e){return Object(j.a)({},e),r.a.createElement("div",null,r.a.createElement(d.Button,null,"DrinkBtn"))};n(389);var I=function(){return r.a.createElement(d.Button,null,"End Btn")},C=(i.Component,i.Component,function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"goTo",value:function(e){this.props.history.replace("/".concat(e))}},{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentDidMount",value:function(){var e=this.props.auth.renewSession;"true"===localStorage.getItem("isLoggedIn")&&e()}},{key:"render",value:function(){this.props.auth.isAuthenticated;return r.a.createElement("div",null)}}]),t}(i.Component)),w=(i.Component,n(706)),D=n(704),B=n(705),N=(n(391),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={profile:{},sessionID:""},n.startSession=function(e){e.preventDefault(),O.saveSession({drinkGoal:n.state.drinkGoal,maxBAC:n.state.maxBAC,budget:n.state.budget,sub:n.state.profile.sub}).then(function(e){return n.setState({sessionID:e.data._id})}).catch(function(e){return console.log(e)})},n.addDrink=function(e){e.preventDefault(),O.saveDrink({sessionid:n.state.sessionID}).catch(function(e){return console.log(e)})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth;t.userProfile,t.getUserInfo,t.userInfo;if(this.props.auth.isAuthenticated()){var n,a=localStorage.getItem("access_token");this.props.auth.lock.getUserInfo(a,function(t,a){console.log(a),n=a,e.setState({profile:n})})}}},{key:"render",value:function(){var e=this.state.profile;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"profile-area"},r.a.createElement("h1",null,e.name),r.a.createElement(w.a,{header:"Profile"},r.a.createElement("img",{src:e.picture,alt:"profile"}),r.a.createElement("div",null,r.a.createElement(D.a,null,r.a.createElement(B.a,{glyph:"user"})," Nickname"),r.a.createElement("h3",null,e.nickname)),r.a.createElement("pre",null,JSON.stringify(e,null,2))),r.a.createElement(d.Button,{onClick:this.startSession},"Session"),r.a.createElement(d.Button,{onClick:this.addDrink},"Drink"),r.a.createElement(d.Button,null,"Logout")))}}]),t}(i.Component)),A=n(302),T=n.n(A),_=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},r.a.createElement("img",{src:T.a,alt:"loading"}))}}]),t}(i.Component),L=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"goTo",value:function(e){this.props.history.replace("/".concat(e))}},{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentDidMount",value:function(){var e=this.props.auth.renewSession;"true"===localStorage.getItem("isLoggedIn")&&e()}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return r.a.createElement("div",null,r.a.createElement(d.Button,{bsstyle:"primary",className:"btn-margin",onClick:this.goTo.bind(this,"profile")},"Profile"),!e()&&r.a.createElement(d.Button,{id:"qsLoginBtn",bsstyle:"primary",className:"btn-margin",onClick:this.login.bind(this)},"Log In"),e()&&r.a.createElement(d.Button,{id:"qsLogoutBtn",bsstyle:"primary",className:"btn-margin",onClick:this.logout.bind(this)},"Log Out"))}}]),t}(i.Component),U=n(188),x=n.n(U),J={domain:"wkruger.auth0.com",clientId:"pPl4zpuRsL0XqcVCtTi1FZcX4yt7O4HF",callbackUrl:"http://localhost:3000/callback"},M=n(303),P=n.n(M)()(),R=new(function(){function e(){Object(l.a)(this,e),this.lock=new x.a(J.clientId,J.domain,{autoclose:!0,auth:{redirectUrl:J.callbackUrl,responseType:"token id_token",params:{scope:"openid profile"}}}),this.handleAuthentication(),console.log("in handles"),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)}return Object(u.a)(e,[{key:"login",value:function(){this.lock.show()}},{key:"handleAuthentication",value:function(){this.lock.on("authenticated",this.setSession.bind(this)),this.lock.on("authorization_error",function(e){console.log(e),alert("Error: ".concat(e.error,". Check the console for further details.")),P.replace("/profile")})}},{key:"setSession",value:function(e){if(e&&e.accessToken&&e.idToken){var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());this.lock.getUserInfo(e.accessToken,function(e,t){e||(console.log(t),localStorage.setItem("profile",JSON.parse(t)))}),localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),localStorage.setItem("expires_at",t),P.replace("/profile")}}},{key:"logout",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),P.replace("/profile")}},{key:"isAuthenticated",value:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}()),q=r.a.createElement(c.a,{history:P},r.a.createElement("div",null,r.a.createElement(s.a,{path:"/",render:function(e){return r.a.createElement(L,Object.assign({auth:R},e))}}),r.a.createElement(s.a,{path:"/home",render:function(e){return r.a.createElement(C,Object.assign({auth:R},e))}}),r.a.createElement(s.a,{path:"/profile",render:function(e){return r.a.createElement(N,Object.assign({auth:R},e))}}),r.a.createElement(s.a,{path:"/callback",render:function(e){return function(e){var t=e.location;console.log(t),/access_token|id_token|error/.test(t.hash)&&R.handleAuthentication()}(e),r.a.createElement(_,e)}})));o.a.render(q,document.getElementById("root"))}},[[306,2,1]]]);
//# sourceMappingURL=main.b1265055.chunk.js.map